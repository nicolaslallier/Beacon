# Beacon NGINX & Monitoring Stack Environment

# Core NGINX reverse proxy
NGINX_HTTP_PORT=80
TECHNITIUM_DNS_PORT=53
UPSTREAM_WEB_HOST=web
UPSTREAM_WEB_PORT=3000
UPSTREAM_API_HOST=api
UPSTREAM_API_PORT=8080
MAX_BODY_SIZE=50m
GZIP_ENABLED=on

# Monitoring stack
GRAFANA_PORT=3000
GF_SECURITY_ADMIN_PASSWORD=Moine101!!01

# Optional: Un-comment to override default internal ports
# PROMETHEUS_PORT=9090
# LOKI_PORT=3100
# TEMPO_PORT=3200
# =============================================================================
# Let's Encrypt / SSL Configuration
# =============================================================================

# Email for Let's Encrypt certificate notifications
LETSENCRYPT_EMAIL=admin@famillelallier.net

# Certbot paths (relative to project directory)
CERTBOT_WWW_PATH=./certbot/www
CERTBOT_CONF_PATH=./certbot/conf

# SSL certificate paths (where nginx expects them)
SSL_CERTS_PATH=./certs
SSL_CERT_PATH=/etc/nginx/certs/fullchain.pem
SSL_KEY_PATH=/etc/nginx/certs/privkey.pem

# =============================================================================
# API Gateway (Traefik + OAuth2 Proxy)
# =============================================================================
UPSTREAM_GATEWAY_HOST=beacon-traefik
UPSTREAM_GATEWAY_PORT=8080

# OAuth2 Proxy (Keycloak OIDC)
OAUTH2_PROXY_PROVIDER=keycloak-oidc
OAUTH2_PROXY_OIDC_ISSUER_URL=http://keycloak:8080/realms/beacon
OAUTH2_PROXY_INSECURE_OIDC_SKIP_ISSUER_VERIFICATION=true
OAUTH2_PROXY_CLIENT_ID=beacon-gateway
OAUTH2_PROXY_CLIENT_SECRET=CHANGE_ME
OAUTH2_PROXY_COOKIE_SECRET=FRWzeMPp+TQvL+joSwa6pbwE0mb9uWe/
OAUTH2_PROXY_REDIRECT_URL=https://beacon-library.famillelallier.net/oauth2/callback
OAUTH2_PROXY_EMAIL_DOMAINS=*
OAUTH2_PROXY_COOKIE_SECURE=true

# Beacon Library upstreams (NGINX)
UPSTREAM_BEACON_LIBRARY_HOST=beacon-library-frontend
UPSTREAM_BEACON_LIBRARY_PORT=3000
UPSTREAM_MCP_VECTOR_HOST=beacon-library-mcp-vector
UPSTREAM_MCP_VECTOR_PORT=8001

# Beacon Library frontend auth
VITE_KEYCLOAK_URL=https://keycloak.beacon.famillelallier.net

# =============================================================================
# n8n Automation
# =============================================================================
N8N_HOST=n8n.beacon.famillelallier.net
N8N_PORT=5678
N8N_PROTOCOL=https
N8N_WEBHOOK_URL=https://n8n.beacon.famillelallier.net/
N8N_EDITOR_BASE_URL=https://n8n.beacon.famillelallier.net/
N8N_TIMEZONE=America/Montreal
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=change_me
